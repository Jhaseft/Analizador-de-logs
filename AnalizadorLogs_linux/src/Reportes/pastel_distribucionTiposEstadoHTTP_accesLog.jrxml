<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="pastel_distribucionTiposEstadoHTTP_accesLog" language="groovy" pageWidth="572" pageHeight="752" columnWidth="555" leftMargin="0" rightMargin="0" topMargin="0" bottomMargin="0" uuid="c8b2326a-f41c-46a4-92b1-777dadfc2030">
	<property name="ireport.zoom" value="1.0"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<queryString>
		<![CDATA[SELECT
  CASE
    WHEN Estado REGEXP '^[1][0-9][0-9]$' THEN '1xx - Informativo'
    WHEN Estado REGEXP '^[2][0-9][0-9]$' THEN '2xx - Éxito'
    WHEN Estado REGEXP '^[3][0-9][0-9]$' THEN '3xx - Redirección'
    WHEN Estado REGEXP '^[4][0-9][0-9]$' THEN '4xx - Error del cliente'
    WHEN Estado REGEXP '^[5][0-9][0-9]$' THEN '5xx - Error del servidor'
    ELSE 'Otro / No definido'
  END AS CategoriaHTTP,

  COUNT(*) AS TotalRegistros,

  ROUND(100.0 * COUNT(*) / (SELECT COUNT(*) FROM acces_log), 2) AS PorcentajeTotal

FROM acces_log
GROUP BY CategoriaHTTP
ORDER BY TotalRegistros DESC;]]>
	</queryString>
	<field name="CategoriaHTTP" class="java.lang.String"/>
	<field name="TotalRegistros" class="java.lang.Long"/>
	<field name="PorcentajeTotal" class="java.math.BigDecimal"/>
	<background>
		<band splitType="Stretch"/>
	</background>
	<title>
		<band height="25" splitType="Stretch">
			<staticText>
				<reportElement x="0" y="0" width="327" height="25" uuid="f61d8a2c-f8bc-4502-ad4d-657eed8e57ee"/>
				<textElement verticalAlignment="Middle">
					<font size="12" isBold="true"/>
				</textElement>
				<text><![CDATA[DISTRIBUCION DE TIPOS DE ESTADO HTTP:]]></text>
			</staticText>
		</band>
	</title>
	<summary>
		<band height="269" splitType="Stretch">
			<pie3DChart>
				<chart isShowLegend="true">
					<reportElement x="0" y="0" width="572" height="269" uuid="a3d95fed-9a3b-49a7-a0ac-4c6c64d3ab0c"/>
					<chartTitle position="Right">
						<font fontName="Arial" size="11" isBold="true" isItalic="true"/>
					</chartTitle>
					<chartSubtitle>
						<font fontName="Arial" isBold="true" isItalic="true"/>
					</chartSubtitle>
					<chartLegend>
						<font fontName="Arial" isBold="true" isItalic="true"/>
					</chartLegend>
				</chart>
				<pieDataset>
					<keyExpression><![CDATA[$F{PorcentajeTotal}]]></keyExpression>
					<valueExpression><![CDATA[$F{PorcentajeTotal}]]></valueExpression>
					<labelExpression><![CDATA[$F{CategoriaHTTP}]]></labelExpression>
				</pieDataset>
				<pie3DPlot isShowLabels="true" isCircular="true" labelFormat="{1} ({2}%)" legendLabelFormat="{1} %">
					<plot>
						<seriesColor seriesOrder="0" color="#FF3333"/>
						<seriesColor seriesOrder="1" color="#3F38FE"/>
						<seriesColor seriesOrder="2" color="#EE28FB"/>
						<seriesColor seriesOrder="3" color="#00FF99"/>
						<seriesColor seriesOrder="4" color="#99FF00"/>
						<seriesColor seriesOrder="5" color="#00CCFF"/>
						<seriesColor seriesOrder="6" color="#0CDD62"/>
						<seriesColor seriesOrder="7" color="#EED5ED"/>
						<seriesColor seriesOrder="8" color="#695DCC"/>
						<seriesColor seriesOrder="9" color="#3778A9"/>
						<seriesColor seriesOrder="10" color="#FFFFFF"/>
					</plot>
					<itemLabel color="#000000" backgroundColor="#FFFFFF">
						<font fontName="Arial" isBold="true" isItalic="true"/>
					</itemLabel>
				</pie3DPlot>
			</pie3DChart>
		</band>
	</summary>
</jasperReport>
