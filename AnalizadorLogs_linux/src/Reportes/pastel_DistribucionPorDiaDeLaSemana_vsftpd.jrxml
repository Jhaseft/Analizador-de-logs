<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="pastel_DistribucionPorDiaDeLaSemana_vsftpd" language="groovy" pageWidth="572" pageHeight="752" columnWidth="555" leftMargin="0" rightMargin="0" topMargin="0" bottomMargin="0" uuid="0e8bb33e-c732-4451-b8eb-6b71b297874f">
	<property name="ireport.zoom" value="1.0"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<parameter name="SUBREPORT_DIR" class="java.lang.String" isForPrompting="false">
		<defaultValueExpression><![CDATA["C:\\Users\\Usuario\\Documents\\TSO y ASO\\ANALIZADOR DE LOGS\\Analizador-de-logs\\Desktop\\AnalizadorLogs\\src\\reportes\\"]]></defaultValueExpression>
	</parameter>
	<queryString>
		<![CDATA[SELECT
  CASE DAYOFWEEK(Fecha)
    WHEN 1 THEN 'Domingo'
    WHEN 2 THEN 'Lunes'
    WHEN 3 THEN 'Martes'
    WHEN 4 THEN 'Miércoles'
    WHEN 5 THEN 'Jueves'
    WHEN 6 THEN 'Viernes'
    WHEN 7 THEN 'Sábado'
  END AS DiaSemana,
  COUNT(*) AS TotalEventos,
  ROUND((COUNT(*) * 100.0 / (SELECT COUNT(*) FROM ftp)), 2) AS Porcentaje
FROM ftp
GROUP BY DAYOFWEEK(Fecha)
ORDER BY FIELD(DiaSemana, 'Lunes', 'Martes', 'Miércoles', 'Jueves', 'Viernes', 'Sábado', 'Domingo');]]>
	</queryString>
	<field name="DiaSemana" class="java.lang.String"/>
	<field name="TotalEventos" class="java.lang.Long"/>
	<field name="Porcentaje" class="java.math.BigDecimal"/>
	<background>
		<band splitType="Stretch"/>
	</background>
	<title>
		<band height="20" splitType="Stretch">
			<staticText>
				<reportElement x="0" y="0" width="572" height="20" uuid="dc22379a-7658-42e4-b047-519cc05677bc"/>
				<textElement verticalAlignment="Middle">
					<font size="12" isBold="true"/>
				</textElement>
				<text><![CDATA[DISTRIBUCION DE TRAFICO POR DIA DE LA SEMANA.]]></text>
			</staticText>
		</band>
	</title>
	<summary>
		<band height="424" splitType="Stretch">
			<pie3DChart>
				<chart>
					<reportElement x="0" y="0" width="572" height="171" uuid="17f2f3c8-33c8-468f-bfcf-7a8230c0a733"/>
					<chartTitle/>
					<chartSubtitle/>
					<chartLegend/>
				</chart>
				<pieDataset>
					<keyExpression><![CDATA[$F{Porcentaje}]]></keyExpression>
					<valueExpression><![CDATA[$F{Porcentaje}]]></valueExpression>
					<labelExpression><![CDATA[$F{DiaSemana}]]></labelExpression>
				</pieDataset>
				<pie3DPlot isShowLabels="true" isCircular="false" labelFormat="{1}({2}%" legendLabelFormat="{1}%">
					<plot>
						<seriesColor seriesOrder="0" color="#3399FF"/>
						<seriesColor seriesOrder="1" color="#33CC00"/>
						<seriesColor seriesOrder="2" color="#FF3333"/>
						<seriesColor seriesOrder="3" color="#E2A383"/>
						<seriesColor seriesOrder="4" color="#897F12"/>
						<seriesColor seriesOrder="5" color="#EB6392"/>
						<seriesColor seriesOrder="6" color="#5113E5"/>
					</plot>
					<itemLabel color="#000000">
						<font fontName="Arial" isBold="true" isItalic="true"/>
					</itemLabel>
				</pie3DPlot>
			</pie3DChart>
			<subreport>
				<reportElement x="0" y="187" width="572" height="225" uuid="f5c9404b-eef8-46d5-806a-2b0260b04536"/>
				<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
				<subreportExpression><![CDATA[$P{SUBREPORT_DIR} + "grafica_distribucDeEventosExitososVSFallidos.jasper"]]></subreportExpression>
			</subreport>
		</band>
	</summary>
</jasperReport>
