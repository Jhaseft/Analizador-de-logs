<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="pastel_comparacionAccesosPorSO_general" language="groovy" pageWidth="612" pageHeight="792" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="c9b65bb5-2b9e-4be6-8c0b-8d42fca7882d">
	<property name="ireport.zoom" value="1.0"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<style name="table">
		<box>
			<pen lineWidth="1.0" lineColor="#000000"/>
		</box>
	</style>
	<style name="table_TH" mode="Opaque" backcolor="#F0F8FF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table_CH" mode="Opaque" backcolor="#BFE1FF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table_TD" mode="Opaque" backcolor="#FFFFFF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
		<conditionalStyle>
			<conditionExpression><![CDATA[new Boolean($V{REPORT_COUNT}.intValue()%2==0)]]></conditionExpression>
			<style backcolor="#EFF7FF"/>
		</conditionalStyle>
	</style>
	<subDataset name="tabla" uuid="ce186b67-fb53-4599-8a32-ff2bd565a5b1">
		<queryString language="SQL">
			<![CDATA[SELECT
  `Sistema Operativo` AS sistema,
  COUNT(*) AS total,
  ROUND(COUNT(*) * 100.0 / (SELECT COUNT(*) FROM acces_log), 2) AS porcentaje
FROM acces_log
GROUP BY `Sistema Operativo`
ORDER BY total DESC;]]>
		</queryString>
		<field name="sistema" class="java.lang.String"/>
		<field name="total" class="java.lang.Long"/>
		<field name="porcentaje" class="java.math.BigDecimal"/>
	</subDataset>
	<queryString>
		<![CDATA[SELECT
  `Sistema Operativo` AS sistema,
  COUNT(*) AS total,
  ROUND(COUNT(*) * 100.0 / (SELECT COUNT(*) FROM acces_log), 2) AS porcentaje
FROM acces_log
GROUP BY `Sistema Operativo`
ORDER BY total DESC;]]>
	</queryString>
	<field name="sistema" class="java.lang.String"/>
	<field name="total" class="java.lang.Long"/>
	<field name="porcentaje" class="java.math.BigDecimal"/>
	<background>
		<band splitType="Stretch"/>
	</background>
	<title>
		<band height="22" splitType="Stretch">
			<staticText>
				<reportElement x="0" y="0" width="572" height="20" uuid="09c73b72-4f6c-4f2c-823f-825772a9e690"/>
				<textElement verticalAlignment="Middle">
					<font fontName="Arial" size="12" isBold="true"/>
				</textElement>
				<text><![CDATA[USO DEL SISTEMA OPERATIVO EN LOS REGISTROS DE ACCESO.]]></text>
			</staticText>
		</band>
	</title>
	<summary>
		<band height="583" splitType="Stretch">
			<pie3DChart>
				<chart>
					<reportElement x="0" y="0" width="572" height="258" uuid="f8bcc5c1-f64b-42c6-a18a-1382c15ab71e"/>
					<chartTitle/>
					<chartSubtitle/>
					<chartLegend>
						<font isBold="true"/>
					</chartLegend>
				</chart>
				<pieDataset>
					<keyExpression><![CDATA[$F{sistema}]]></keyExpression>
					<valueExpression><![CDATA[$F{total}]]></valueExpression>
					<labelExpression><![CDATA[$F{sistema} + " (" + $F{porcentaje} + "%)"]]></labelExpression>
				</pieDataset>
				<pie3DPlot isShowLabels="true" isCircular="false">
					<plot/>
					<itemLabel color="#333333">
						<font fontName="Arial" size="12" isBold="false" isItalic="true"/>
					</itemLabel>
				</pie3DPlot>
			</pie3DChart>
			<componentElement>
				<reportElement key="table" style="table" x="131" y="275" width="336" height="80" uuid="7aa4afaa-7976-402d-9e45-9b44b314a6aa"/>
				<jr:table xmlns:jr="http://jasperreports.sourceforge.net/jasperreports/components" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports/components http://jasperreports.sourceforge.net/xsd/components.xsd">
					<datasetRun subDataset="tabla" uuid="db23e8da-052d-478f-9cfa-5b2b8db1e10b">
						<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
					</datasetRun>
					<jr:column width="134" uuid="dde9f092-1f45-478d-a01e-0c2691af65c0">
						<jr:columnHeader style="table_CH" height="30" rowSpan="1">
							<staticText>
								<reportElement x="0" y="0" width="134" height="30" uuid="6ca93357-aecf-4684-b1e2-83e71af184ea"/>
								<textElement textAlignment="Center" verticalAlignment="Middle">
									<font fontName="Arial" size="12" isBold="true"/>
								</textElement>
								<text><![CDATA[SISTEMA OPERATIVO]]></text>
							</staticText>
						</jr:columnHeader>
						<jr:detailCell style="table_TD" height="20" rowSpan="1">
							<textField>
								<reportElement x="0" y="0" width="134" height="20" uuid="3b13ae1b-0708-40db-8352-498530869163"/>
								<textElement textAlignment="Center" verticalAlignment="Middle">
									<font fontName="Arial" size="12"/>
								</textElement>
								<textFieldExpression><![CDATA[$F{sistema}]]></textFieldExpression>
							</textField>
						</jr:detailCell>
					</jr:column>
					<jr:column width="80" uuid="275d3609-28b4-4bda-8587-92ba37d10775">
						<jr:columnHeader style="table_CH" height="30" rowSpan="1">
							<staticText>
								<reportElement x="0" y="0" width="80" height="30" uuid="93056e0a-a868-43cc-af43-b46c95d363b1"/>
								<textElement textAlignment="Center" verticalAlignment="Middle">
									<font fontName="Arial" size="12" isBold="true"/>
								</textElement>
								<text><![CDATA[TOTAL USO]]></text>
							</staticText>
						</jr:columnHeader>
						<jr:detailCell style="table_TD" height="20" rowSpan="1">
							<textField>
								<reportElement x="0" y="0" width="80" height="20" uuid="1887c149-d7a3-4028-9e2b-5573ff594d82"/>
								<textElement textAlignment="Center" verticalAlignment="Middle">
									<font fontName="Arial" size="12"/>
								</textElement>
								<textFieldExpression><![CDATA[$F{total}]]></textFieldExpression>
							</textField>
						</jr:detailCell>
					</jr:column>
					<jr:column width="106" uuid="872dbacc-94be-4368-ad24-10af8f166812">
						<jr:columnHeader style="table_CH" height="30" rowSpan="1">
							<staticText>
								<reportElement x="0" y="0" width="106" height="30" uuid="c2ebf1e9-4eb1-4a62-83ae-b260ae1a38dc"/>
								<textElement textAlignment="Center" verticalAlignment="Middle">
									<font fontName="Arial" size="12" isBold="true"/>
								</textElement>
								<text><![CDATA[PORCENTAJE]]></text>
							</staticText>
						</jr:columnHeader>
						<jr:detailCell style="table_TD" height="20" rowSpan="1">
							<textField>
								<reportElement x="0" y="0" width="106" height="20" uuid="43e89efb-0ee9-41f2-a8f2-d5cb4b39320c"/>
								<textElement textAlignment="Center" verticalAlignment="Middle">
									<font fontName="Arial" size="12"/>
								</textElement>
								<textFieldExpression><![CDATA[$F{porcentaje}]]></textFieldExpression>
							</textField>
						</jr:detailCell>
					</jr:column>
				</jr:table>
			</componentElement>
		</band>
	</summary>
</jasperReport>
